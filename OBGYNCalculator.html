<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OB Calculator</title>
    <style>
        body{
            font-family: Arial;
        }
    </style>
</head>
<body>
<p>Last Menstrual Period: <input type="date" id="LMP"></p>
<p>Current Date: <input type="date" id="date_c"></p>
<script>
    document.getElementById("date_c").value = new Date().toISOString().substr(0, 10);
</script>
<p><button type="button" onclick="cal()">Calculate</button></p>
<p id="GA_result"></p>
<p id="EDD_result"></p>
<script>
    function cal(){
        let LMP = new Date(document.getElementById("LMP").value);
        let EDD = new Date(LMP);
        EDD.setDate(LMP.getDate()+280);
        let CurrentDate = new Date(document.getElementById("date_c").value);
        let DateDiff_in_Days = parseInt((CurrentDate - LMP)/(24*3600*1000));
        let DateDiff_in_Weeks = parseInt(DateDiff_in_Days/7);
        let DateDiff_index = DateDiff_in_Days%7;
        document.getElementById("GA_result").innerHTML = "<b>Gestational Age</b>: " + DateDiff_in_Weeks + "<sup>+" + DateDiff_index + "</sup> W";
        document.getElementById("EDD_result").innerHTML = "<b>Estimated Date of Delivery</b>: " + EDD.toLocaleDateString('en-US');
    }
</script>
<hr>
<p>Ultrasound Date: <input type="date" id="date_us"></p>
<p>GA by Ultrasound: <input type="text" id="GA_w_us" size="2">weeks <input type="text" id="GA_d_us" size="1">days</p>
<p><button type="button" onclick="cal_us()">Calculate</button></p>
<p id="GA_us_result"></p>
<p id="EDD_us_result"></p>
<script>
    function cal_us(){
        let date_us = new Date(document.getElementById("date_us").value);
        let CurrentDate = new Date(document.getElementById("date_c").value);
        let GA_w_us = parseInt(document.getElementById("GA_w_us").value);
        let GA_d_us = parseInt(document.getElementById("GA_d_us").value);
        let DateDiff_in_Days = parseInt((CurrentDate - date_us)/(24*3600*1000)) + GA_w_us*7 + GA_d_us;
        let DateDiff_in_Weeks = parseInt(DateDiff_in_Days/7);
        let DateDiff_index = DateDiff_in_Days%7;
        let EDD = new Date(date_us);
        EDD.setDate(date_us.getDate() + 280 - 7*GA_w_us - GA_d_us);
        document.getElementById("GA_us_result").innerHTML = "<b>Gestational Age</b>: " + DateDiff_in_Weeks + "<sup>+" + DateDiff_index + "</sup> W";
        document.getElementById("EDD_us_result").innerHTML = "<b>Estimated Date of Delivery</b>: " + EDD.toLocaleDateString('en-US');

    }
</script>
<p></p>
</body>
</html>
